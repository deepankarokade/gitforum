<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>View Question Paper</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

	<style>
		body {
			background: linear-gradient(to right, #eef2f3, #f9fbfd);
			font-family: "Segoe UI", sans-serif;
		}

		.navbar {
			background: linear-gradient(90deg, #1e3c72, #2a5298);
			padding: 15px 30px;
			color: white;
		}

		.navbar a {
			color: white;
			margin-left: 15px;
			text-decoration: none;
		}

		.question-card {
			margin-bottom: 20px;
		}

		.question-type {
			font-style: italic;
			color: #555;
		}

		.option {
			margin-left: 20px;
		}

		.match-pair {
			margin-left: 20px;
		}
	</style>
</head>

<body>

	<!-- NAVBAR -->
	<div class="navbar d-flex justify-content-between align-items-center">
		<div class="fw-bold">Online Examination Portal</div>
		<div>
			<a th:href="@{/professor/dashboard}">Dashboard</a>
			<a th:href="@{/professor/exams}">All Exams</a>
		</div>
	</div>

	<div class="container mt-4">

		<!-- EXAM INFO -->
		<div class="card mb-4 shadow-sm">
			<div class="card-body">
				<h5 class="mb-3">
					Exam: <span th:text="${paper.subject}"></span> -
					Set <span th:text="${paper.selectset}"></span>
				</h5>
				<div class="row">
					<div class="col-md-4"><b>Chapter:</b> <span th:text="${paper.chapter}"></span></div>
					<div class="col-md-4"><b>Duration:</b> <span th:text="${paper.duration}"></span> min</div>
					<div class="col-md-4"><b>Difficulty:</b> <span th:text="${paper.difficulty}"></span></div>
				</div>
			</div>
		</div>

		<!-- QUESTIONS -->
		<div th:each="question, qStat : ${questions}" class="card question-card shadow-sm">
			<div class="card-body">

				<h6>
					Q<span th:text="${qStat.count}"></span>.
					<span th:text="${question.questionText}"></span>
					<span class="question-type" th:text="${'(' + question.questionType.toUpperCase() + ')'}"></span>
				</h6>

				<!-- ================= MCQ ================= -->
				<ul th:if="${question.questionType == 'mcq'}"
					style="list-style-type:none; padding-left:0; margin-top:10px;">

					<li th:each="opt, optStat : ${#strings.arraySplit(question.options, '|')}" class="option">
						<b th:text="${T(java.lang.Character).toString(65 + optStat.index)} + '. '"></b>
						<span th:text="${opt}"></span>
					</li>


				</ul>

				<!-- =============== TRUE / FALSE =============== -->
				<p th:if="${question.questionType == 'tf'}" class="mt-2">
					<b>Answer:</b>
					<span th:text="${question.correctAnswer}"></span>
				</p>

				<!-- ========== SHORT / LONG / ESSAY ========== -->
				<p th:if="${question.questionType == 'short'
                     or question.questionType == 'long'
                     or question.questionType == 'essay'}" class="mt-2">
					<b>Answer:</b>
					<span th:text="${question.correctAnswer}"></span>
				</p>

				<!-- ========== FILL IN THE BLANKS ========== -->
				<ul th:if="${question.questionType == 'fill'}"
					style="list-style-type:none; padding-left:0; margin-top:10px;">

					<li th:each="blank, bStat : ${#strings.arraySplit(question.fillintheblanks, '|')}" class="option">
						<b th:text="${T(java.lang.Character).toString(65 + bStat.index)} + '. '"></b>
						<span th:text="${blank}"></span>
					</li>


				</ul>

				<!-- ========== MATCH THE FOLLOWING ========== -->
				<!-- ========== MATCH THE FOLLOWING ========== -->
				<!-- ========== MATCH THE FOLLOWING ========== -->
				<div th:if="${question.questionType == 'match'}" class="mt-3">

					<div class="row fw-bold mb-2">
						<div class="col-6">Column A</div>
						<div class="col-6">Column B</div>
					</div>

					<div th:each="pair, stat : ${question.parsedMatchPairs}" class="row mb-1">

						<!-- Column A -->
						<div class="col-6">
							<b th:text="${stat.count} + '. '"></b>
							<span th:text="${pair[0]}"></span>
						</div>

						<!-- Column B -->
						<div class="col-6">
							<b th:text="${T(java.lang.Character).toString(64 + stat.count)} + '. '"></b>
							<span th:text="${pair[1]}"></span>
						</div>

					</div>
				</div>

			</div>


		</div>
	</div>

	</div>

</body>

</html>